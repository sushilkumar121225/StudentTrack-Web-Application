@model StudentTrack.Models.AdminStudent
@{
    ViewData["Title"] = "Add Student";
}

<div class="container mt-5">
    <h2 class="fw-bold text-primary mb-4">➕ Add New Student</h2>

    @if (TempData["SuccessMessage"] != null)
    {
        <div class="alert alert-success">@TempData["SuccessMessage"]</div>
    }
    @if (TempData["ErrorMessage"] != null)
    {
        <div class="alert alert-danger">@TempData["ErrorMessage"]</div>
    }

    <form asp-action="AddStudent" method="post" class="card shadow-lg p-4">
        <div class="row g-3">
            <!-- Full Name -->
            <div class="col-md-6">
                <label asp-for="FullName" class="form-label">Full Name</label>
                <input asp-for="FullName" class="form-control" placeholder="Enter full name" required />
                <span asp-validation-for="FullName" class="text-danger"></span>
            </div>

            <!-- Email -->
            <div class="col-md-6">
                <label asp-for="Email" class="form-label">Email</label>
                <input asp-for="Email" class="form-control" placeholder="Enter email" required />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>

            <!-- Gender -->
            <div class="col-md-6">
                <label asp-for="Gender" class="form-label">Gender</label>
                <select asp-for="Gender" class="form-select" required>
                    <option value="">-- Select Gender --</option>
                    <option>Male</option>
                    <option>Female</option>
                    <option>Other</option>
                </select>
                <span asp-validation-for="Gender" class="text-danger"></span>
            </div>

            <!-- Enrollment No -->
            <div class="col-md-6">
                <label asp-for="EnrollmentNo" class="form-label">Enrollment No</label>
                <input asp-for="EnrollmentNo" class="form-control" placeholder="Enter 9-digit number" maxlength="9" required />
                <span asp-validation-for="EnrollmentNo" class="text-danger"></span>
            </div>

            <!-- Contact -->
            <div class="col-md-6">
                <label asp-for="Contact" class="form-label">Contact Number</label>
                <input asp-for="Contact" class="form-control" maxlength="10" placeholder="Enter contact number" required />
                <span asp-validation-for="Contact" class="text-danger"></span>
            </div>

            <!-- DOB -->
            <div class="col-md-6">
                <label asp-for="DOB" class="form-label">Date of Birth</label>
                <input asp-for="DOB" type="date" class="form-control" required />
                <span asp-validation-for="DOB" class="text-danger"></span>
            </div>

            <!-- Course -->
            <div class="col-md-6">
                <label asp-for="Course" class="form-label">Course</label>
                <select asp-for="Course" class="form-select" id="course" required>
                    <option value="">-- Select Course --</option>
                    <option value="B.Tech (4 Y)">B.Tech (4 Y)</option>
                    <option value="Management (3 Y)">Management (3 Y)</option>
                    <option value="LAW (5 Y)">LAW (5 Y)</option>
                    <option value="Science (3 Y)">Science (3 Y)</option>
                    <option value="Arts (3 Y)">Arts (3 Y)</option>
                    <option value="Nurshing (3/4 Y)">Nurshing (3/4 Y)</option>
                </select>
                <span asp-validation-for="Course" class="text-danger"></span>
            </div>

            <!-- Stream -->
            <div class="col-md-6">
                <label asp-for="Stream" class="form-label">Stream</label>
                <select asp-for="Stream" id="stream" class="form-select" required>
                    <option value="">-- Select Stream --</option>
                </select>
                <span asp-validation-for="Stream" class="text-danger"></span>
            </div>

            <!-- Session Year -->
            <div class="col-md-6">
                <label asp-for="SessionYear" class="form-label">Session Year</label>
                <input asp-for="SessionYear" class="form-control" placeholder="e.g. 2025-2029" required />
                <span asp-validation-for="SessionYear" class="text-danger"></span>
            </div>

            <!-- Address -->
            <div class="col-md-12">
                <label asp-for="Address" class="form-label">Address</label>
                <textarea asp-for="Address" class="form-control" rows="2" placeholder="Enter full address" required></textarea>
                <span asp-validation-for="Address" class="text-danger"></span>
            </div>

            <!-- Admission Type -->
            <div class="col-md-12">
                <label asp-for="AdmissionType" class="form-label">Admission Type</label>
                <select asp-for="AdmissionType" class="form-select" required>
                    <option value="">-- Select Admission Type --</option>
                    <option>Direct</option>
                    <option>JEE Mains</option>
                    <option>State Board / CBSE</option>
                    <option>CAT</option>
                    <option>CUET-UG</option>
                    <option>NEET-UG</option>
                    <option>NATA</option>
                    <option>CLAT</option>
                </select>
                <span asp-validation-for="AdmissionType" class="text-danger"></span>
            </div>

            <!-- Submit Button -->
            <div class="col-12 text-end mt-3">
                <button type="submit" class="btn btn-primary px-4">💾 Save Student</button>
                <a href="/Admin/Students" class="btn btn-secondary px-4">⬅ Back</a>
            </div>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        document.getElementById("course").addEventListener("change", function () {
            const streamDropdown = document.getElementById("stream");
            const course = this.value;
            let options = [];

            if (course === "B.Tech (4 Y)") {
                options = [
                    "Computer Engineering",
                    "Computer Science & Engineering Artificial Intelligence",
                    "Information Technology",
                    "Electrical Engineering",
                    "Chemical Engineering",
                    "Civil Engineering",
                    "Mechanical Engineering",
                    "Bioinformatics"
                ];
            } else if (course === "Management (3 Y)") {
                options = ["BBA", "B.Com", "BBA (Digital Marketing)"];
            } else if (course === "LAW (5 Y)") {
                options = ["BCom LLB", "BA LLB"];
            } else if (course === "Science (3 Y)") {
                options = ["Physics", "Chemistry", "Biology", "Mathematics", "Microbiology"];
            } else if (course === "Arts (3 Y)") {
                options = ["History", "Political Science", "Sociology", "English Literature"];
            } else if (course === "Nurshing (3/4 Y)") {
                options = ["General Nursing And Midwifery", "B.Sc Nursing"];
            }

            streamDropdown.innerHTML = '<option value="">-- Select Stream --</option>';
            options.forEach(opt => {
                const optionElement = document.createElement("option");
                optionElement.value = opt;
                optionElement.textContent = opt;
                streamDropdown.appendChild(optionElement);
            });
        });
    </script>
}
