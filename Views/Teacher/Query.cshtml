@{
    ViewData["Title"] = "Teacher Query Management";
}

<div class="container mt-5">
    <div class="row g-4">

        <!-- 📨 Section 1: Received Queries -->
        <div class="col-lg-6">
            <div class="p-4 rounded shadow" style="background: linear-gradient(135deg, #d4fc79, #96e6a1);">
                <h3 class="text-success mb-3 fw-bold">📬 Received Queries from Students</h3>

                @if (Model != null && Model.ReceivedQueries != null && Model.ReceivedQueries.Count > 0)
                {
                    <table class="table table-striped table-hover bg-white rounded">
                        <thead class="table-success">
                            <tr>
                                <th>Student Email</th>
                                <th>Message</th>
                                <th>Date</th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var query in Model.ReceivedQueries)
                            {
                                <tr>
                                    <td>@query.SenderEmail</td>
                                    <td>@query.Message</td>
                                    <td>@query.SentAt.ToString("dd/MM/yyyy HH:mm")</td>
                                </tr>
                            }
                        </tbody>
                    </table>
                }
                else
                {
                    <p class="text-muted">No new queries received.</p>
                }
            </div>
        </div>

        <!-- 📨 Section 2: Send Query to Admin -->
        <div class="col-lg-6">
            <div class="p-4 rounded shadow" style="background: linear-gradient(135deg, #a8edea, #fed6e3);">
                <h3 class="text-primary mb-3 fw-bold">📤 Send Query to Admin</h3>

                <form asp-action="SendQuery" asp-controller="Query" method="post">
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Your Email</label>
                        <input type="email" name="SenderEmail" class="form-control" value="@User.Identity.Name" readonly />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-semibold">Admin Email</label>
                        <input type="email" name="ReceiverEmail" class="form-control" placeholder="Enter Admin Email" required />
                    </div>

                    <div class="mb-3">
                        <label class="form-label fw-semibold">Message</label>
                        <textarea name="Message" class="form-control" rows="4" placeholder="Write your message..." required></textarea>
                    </div>

                    <button type="submit" class="btn btn-primary w-100 py-2 fw-bold">Send to Admin</button>
                </form>

                @if (ViewBag.Message != null)
                {
                    <div class="alert alert-success mt-3 text-center">@ViewBag.Message</div>
                }
            </div>
        </div>
    </div>
</div>

<style>
    table td, table th {
        vertical-align: middle;
    }

    textarea:focus, input:focus {
        border-color: #6a11cb !important;
        box-shadow: 0 0 5px #6a11cb;
    }
</style>
